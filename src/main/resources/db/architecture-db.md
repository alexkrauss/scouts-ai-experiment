# PostgreSQL usage conventions

We generally use a normalized database schema, unless specific requirements dictate otherwise.

## Naming conventions

* Tables are named in plural form.
* Columns are named in singular form.
* Names are in snake case, e.g. "foo_bar".
* Foreign key columns are named "foo_id".

## Primary keys and versions

Entities have an id column of type `bigint` with the name `id`.
This key is generated by the database, and thus acts as a surrogate key.

We thus use the type `id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY` for the primary key.

The version column is named `version` and is of type `BIGINT NOT NULL DEFAULT 0`.

## Type conventions

Generally, fields are marked as `NOT NULL`, unless the meaning of a NULL value is documented.

## Value objects

Value objects that are not entities also have no id and no version. They are completely dependent
on the entity that contains them.

## Foreign keys

For simple foreign keys, we use the foreign key syntax `REFERENCES table(column)`.
We use separate `FOREIGN KEY` statements only for composite foreign keys, which should be rare.



